<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>exo4</title>
</head>
<body>
  <!--Créer un formulaire demandant le nom, le prénom, la date de naissance, le lieu de naissance,
  l'emploi et la société.
  Créer un bouton "Générer" permettant de créer une courte phrase de présentation.
  Exemple : Si les données saisies sont :
  "Jérôme OTT, 5/06/1990, Margny-lès-Compiègne, Formateur, Novei",
  la phrase de présentation sera :
  "Jérôme OTT, né le 5/06/1990 à Margny-lès-Compiègne, actuellement Formateur à Novei"-->
  <form>
    <label for="name">Nom :</label><input type="text" name="name" value="" id="lastName"><br>
    <label for="surname">Prénom :</label><input type="text" name="surname" value="" id="surname"><br>
    <label for="birthDate">Date de naissance :</label><input type="text" name="birthDate" value="" id="birthDate"><br>
    <label for="birthPlace">Lieu de naissance :</label><input type="text" name="birthPlace" value="" id="birthPlace"><br>
    <label for="job">Emploi :</label><input type="text" name="job" value="" id="job"><br>
    <label for="boss">Société :</label><input type="text" name="boss" value="" id="company"><br>
    <button type="button" name="button">Générer</button>
  </form>
  <script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous">
  </script>
  <script>
  $(document).ready(function(){
    //Au clic sur le bouton, je lance ma fonction :
    $("button").click(function(){
      var lastName = $("#lastName");
      var surname = $("#surname");
      var birthDate = $("#birthDate");
      var birthPlace = $("#birthPlace");
      var job = $("#job");
      var company = $("#company");
      var nameRegex = /^\D+[-]?\D+/i;
      var dateRegex = /^((0[1-9])|([12][0-9])|(3[01]))[ \/\.\-]((0[1-9])|(1[012]))[ \/\.\-](((19)\d{2})|((200[0-1])))/;
      //déclare variable avec chaîne vide pour concaténation à venir
      var myString = "";
      //Valeur true par défaut, si le test n'est pas ok deviendra false
      var isCorrect = true;
      //si la valeur de mon lastName est ok, je concatène avec var myString
      if (nameRegex.test(lastName.val())){
        myString += lastName.val();
        //et la bordure devient verte
        lastName.css("border", "green 1px solid");
      }else{
        //sinon la bordure devient rouge
        lastName.css("border", "red 1px solid");
        //je met ma var = false pour savoir que le champ n'est pas correct !
        isCorrect=false;
      }
      //si la valeur de mon surname est ok, je concatène avec var myString
      if (nameRegex.test(surname.val())){
        myString += " " + surname.val();
        //et la bordure devient verte
        surname.css("border", "green 1px solid");
      }else{
        //sinon la bordure devient rouge
        surname.css("border", "red 1px solid");
        //je met ma var = false pour savoir que le champ n'est pas correct !
        isCorrect=false;
      }
      //si la valeur de mon birthDate est ok, je concatène avec var myString
      if (dateRegex.test(birthDate.val())){
        myString += ", né(e) le " + birthDate.val();
        //et la bordure devient verte
        birthDate.css("border", "green 1px solid");
      }else{
        //sinon la bordure devient rouge
        birthDate.css("border", "red 1px solid");
        //je met ma var = false pour savoir que le champ n'est pas correct !
        isCorrect=false;
      }
      //si la valeur de mon birthPlace est ok, je concatène avec var myString
      if (birthPlace.val() != ""){
        myString += " à " + birthPlace.val();
        //et la bordure devient verte
        birthPlace.css("border", "green 1px solid");
      }else{
        //sinon la bordure devient rouge
        birthPlace.css("border", "red 1px solid");
        //je met ma var = false pour savoir que le champ n'est pas correct !
        isCorrect=false;
      }
      //si la valeur de mon job est ok, je concatène avec var myString
      if (job.val() != ""){
        myString += ", actuellement " + job.val();
        //et la bordure devient verte
        job.css("border", "green 1px solid");
      }else{
        //sinon la bordure devient rouge
        job.css("border", "red 1px solid");
        //je met ma var = false pour savoir que le champ n'est pas correct !
        isCorrect=false;
      }
      //si la valeur de mon company est ok, je concatène avec var myString
      if (company.val() != ""){
        myString += " à " + company.val();
        //et la bordure devient verte
        company.css("border", "green 1px solid");
      }else{
        //sinon la bordure devient rouge
        company.css("border", "red 1px solid");
        //je met ma var = false pour savoir que le champ n'est pas correct !
        isCorrect=false;
      }
      //si var isCorrect toujours true
      if (isCorrect == true){
        //alors j'affiche ma concaténation
        alert(myString);
      }else{
        //sinon j'affiche un message d'erreur.
        alert("Vérifier que tous les champs soient correctement remplis.");
      }
    });
  });
  </script>
</body>
</html>
